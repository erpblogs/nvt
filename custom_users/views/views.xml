<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<!-- explicit list view definition -->

		<record model="ir.ui.view" id="custom_users.view_users_list">
			<field name="name">custom_users list</field>
			<field name="model">res.users</field>
			<field name="arch" type="xml">
				<tree string="Users">
					<field name="name" />
					<field name="email" />
					<field name="phone" />
					<field name="web_user" column_invisible="True" />
					<field name="portal_department_id" />
					<field name="company_id"/>
					<!-- <field name="company_id" column_invisible="not context.get('default_web_user')"/> -->
					<field name="active"/>
					<field name="login_date" readonly="1"/>
				</tree>
			</field>
		</record>


		<record model="ir.ui.view" id="custom_users.view_users_simple_form_inherit_hr">
			<field name="name">view.users.simple.form.inherit.hr</field>
			<field name="model">res.users</field>
			<field name="inherit_id" ref="base.view_users_simple_form" />
			<field name="arch" type="xml">
				<xpath expr="//group[@name='phone_numbers']" position="attributes">
					<attribute name="invisible">true</attribute>
				</xpath>
				<xpath expr="//label[@for='login']" position="attributes">
					<attribute name="string">Account</attribute>
				</xpath>
				<xpath expr="//field[@name='id']" position="after">
					<field name="active" invisible="1"/>
				</xpath>
				<xpath expr="//field[@name='avatar_128']" position="before">
					<div name="button_box" class="oe_button_box">
					</div>
					<widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>
				</xpath>
				<xpath expr="//group[@name='phone_numbers']" position="after">
			
					<notebook colspan="4">
						

						<page name="custom_preferences" string="Preferences">
							<group>
								<group string="Contact Information" name="custom_personal_inf">
									<field name="phone" widget="phone" />
									<field name="email" widget="email" />
									<field name="web_user" invisible="1" />
									<field name="company_id" />
									<field name="portal_department_id" />
								</group>
								<group string="Localization" name="preferences">
									<field name="active" invisible="1" />
									<label for="lang" />
									<div class="o_row">
										<field name="lang" required="1" />
									</div>
									<field name="tz" widget="timezone_mismatch"
										options="{'tz_offset_field': 'tz_offset'}" />
									<field name="tz_offset" invisible="1" />
								</group>
							</group>
						</page>
						<page name="custom_access_rights" string="Access Rights"
							groups="custom_users.group_user_account_manager">
							<group>
								<group name="custom_access_rights">
									<field name="user_group" invisible="web_user == True" 
									required="web_user != True"/>
									<field name="portal_group" invisible="web_user == False" 
									required="web_user == True"/>
									<field name="groups_id" invisible="1" />
								</group>
								<group name="company_following">
									<!-- <field name="portal_company_following_ids"  -->
									<field name="portal_company_following_ids" 
									widget="many2many_tags"
									invisible="web_user == True" context="{'default_web_company': True}" domain="[('web_company', '=', True)]">
										<tree>
											<field name="name" />
											<field name="phone" />
											<field name="email" />
										</tree>
									</field>
								</group>
							</group>
						</page>
					</notebook>
				</xpath>
			</field>
		</record>

		<!-- Account Manager -->

		<record model="ir.actions.act_window" id="custom_users.action_account_manager_users">
			<field name="name">Account Manager</field>
			<field name="res_model">res.users</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('user_group','=', 'group_user_account_manager')]</field>
			<field name="context">{
				'default_user_group': 'group_user_account_manager'
				}
			</field>
		</record>


		<record model="ir.actions.act_window" id="custom_users.action_sa_manager_users">
			<field name="name">SA manager</field>
			<field name="res_model">res.users</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('user_group','=', 'group_user_sa_manager')]</field>
			<field name="context">{
				'default_user_group': 'group_user_sa_manager'
				}
			</field>
		</record>



		<record model="ir.actions.act_window" id="custom_users.action_cfo_users">
			<field name="name">CFO</field>
			<field name="res_model">res.users</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('user_group','=', 'group_user_cfo')]</field>
			<field name="context">{
				'default_user_group': 'group_user_cfo'
				}
			</field>
		</record>


		<record model="ir.actions.act_window" id="custom_users.action_cooperate_users">
			<field name="name">Cooperate</field>
			<field name="res_model">res.users</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('portal_group','=', 'group_user_cooperate')]</field>
			<field name="context">{
				'default_portal_group': 'group_user_cooperate',
				'portal_user_template': True,
				'default_web_user': True,
				}
			</field>
		</record>


		<record model="ir.actions.act_window" id="custom_users.action_employee_users">
			<field name="name">Employee</field>
			<field name="res_model">res.users</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('portal_group','=', 'group_user_employee')]</field>
			<field name="context">{
				'default_portal_group': 'group_user_employee',
				'portal_user_template': True,
				'default_web_user': True,
				}
			</field>
		</record>


		<!-- server action to the one above -->
		<!-- 
    <record model="ir.actions.server" id="custom_users.action_server">
      <field name="name">custom_users server</field>
      <field name="model_id" ref="model_custom_users_custom_users"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "tree,form",
          "res_model": model._name,
        }
      </field>
    </record> -->


		<!-- Top menu item -->

		<menuitem name="Users Management" id="custom_users.menu_user_root"
			web_icon="contacts,static/description/icon.png" />

		<!-- menu categories -->

		<menuitem name="Web Admin" id="custom_users.menu_web_admin_manager_users"
			parent="custom_users.menu_user_root" sequence="10" />
		<menuitem name="Web User" id="custom_users.menu_web_user_manager_users"
			parent="custom_users.menu_user_root" sequence="20" />
		<!-- <menuitem name="Menu 2" id="custom_users.menu_2" parent="custom_users.menu_user_root"/> -->

		<!-- actions -->
		<!-- Internal User -->
		<menuitem name="Account Manager" id="custom_users.menu_user_account_manager_users"
			parent="custom_users.menu_web_admin_manager_users"
			action="custom_users.action_account_manager_users" />


		<menuitem name="SA manager" id="custom_users.menu_user_sa_manager_users"
			parent="custom_users.menu_web_admin_manager_users"
			action="custom_users.action_sa_manager_users" />



		<menuitem name="CFO" id="custom_users.menu_user_cfo_users"
			parent="custom_users.menu_web_admin_manager_users"
			action="custom_users.action_cfo_users" />



		<!-- Portal Employee -->
		<menuitem name="Cooperate" id="custom_users.menu_user_cooperate_users"
			parent="custom_users.menu_web_user_manager_users"
			action="custom_users.action_cooperate_users" />

		<menuitem name="Employee" id="custom_users.menu_user_employee_users"
			parent="custom_users.menu_web_user_manager_users"
			action="custom_users.action_employee_users" />

	</data>
</odoo>